#!/usr/bin/env python
__license__ = 'GPL v3'
__copyright__ = '2008, Kovid Goyal kovid@kovidgoyal.net'
__docformat__ = 'restructuredtext en'

'''
espn.com
'''
import re
from calibre.web.feeds.news import BasicNewsRecipe
from calibre.ptempfile import TemporaryFile


def classes(classes):
    q = frozenset(classes.split(' '))
    return dict(attrs={
        'class': lambda x: x and frozenset(x.split()).intersection(q)})


class ESPN(BasicNewsRecipe):

    title = 'ESPN'
    description = 'Sports news'
    __author__ = 'Kovid Goyal and Sujata Raman'
    language = 'en'
    no_stylesheets = True

    use_embedded_content = False
    remove_javascript = True
    needs_subscription = 'optional'

    keep_only_tags = [
        classes('article-header article-body'),
    ]
    remove_tags = [
        classes('ad-slot article-social'),
    ]

    feeds = [
        ('Top Headlines', 'https://www.espn.com/espn/rss/news'),
        'https://www.espn.com/espn/rss/nfl/news',
        'https://www.espn.com/espn/rss/nba/news',
        'https://www.espn.com/espn/rss/mlb/news',
        'https://www.espn.com/espn/rss/nhl/news',
        'https://www.espn.com/espn/rss/golf/news',
        'https://www.espn.com/espn/rss/rpm/news',
        'https://www.espn.com/espn/rss/tennis/news',
        'https://www.espn.com/espn/rss/boxing/news',
        'https://www.espn.com/espn/rss/soccer/news',
        # 'http://soccernet.espn.go.com/rss/news',
        'https://www.espn.com/espn/rss/ncb/news',
        'https://www.espn.com/espn/rss/ncf/news',
        'https://www.espn.com/espn/rss/ncaa/news',
        # 'https://www.espn.com/espn/rss/outdoors/news',
        # 'http://sports.espn.go.com/espn/rss/bassmaster/news',
        'https://www.espn.com/espn/rss/oly/news',
        'https://www.espn.com/espn/rss/horse/news'
    ]

    def get_browser(self):
        return BasicNewsRecipe.get_browser(self)
